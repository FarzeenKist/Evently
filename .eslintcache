[{"C:\\Users\\OGOYI\\evently\\src\\index.js":"1","C:\\Users\\OGOYI\\evently\\src\\App.js":"2","C:\\Users\\OGOYI\\evently\\src\\reportWebVitals.js":"3","C:\\Users\\OGOYI\\evently\\src\\components\\Navbar.js":"4","C:\\Users\\OGOYI\\evently\\src\\components\\CreateEvents.js":"5","C:\\Users\\OGOYI\\evently\\src\\components\\Events.js":"6","C:\\Users\\OGOYI\\Desktop\\Evently\\src\\index.js":"7","C:\\Users\\OGOYI\\Desktop\\Evently\\src\\reportWebVitals.js":"8","C:\\Users\\OGOYI\\Desktop\\Evently\\src\\App.js":"9","C:\\Users\\OGOYI\\Desktop\\Evently\\src\\components\\Navbar.js":"10","C:\\Users\\OGOYI\\Desktop\\Evently\\src\\components\\CreateEvents.js":"11","C:\\Users\\OGOYI\\Desktop\\Evently\\src\\components\\Events.js":"12"},{"size":480,"mtime":1645619425382,"results":"13","hashOfConfig":"14"},{"size":4418,"mtime":1659853399315,"results":"15","hashOfConfig":"14"},{"size":362,"mtime":1645619164806,"results":"16","hashOfConfig":"14"},{"size":841,"mtime":1659853570635,"results":"17","hashOfConfig":"14"},{"size":1634,"mtime":1659874491085,"results":"18","hashOfConfig":"14"},{"size":1358,"mtime":1659874561924,"results":"19","hashOfConfig":"14"},{"size":480,"mtime":1645619425382,"results":"20","hashOfConfig":"21"},{"size":362,"mtime":1645619164806,"results":"22","hashOfConfig":"21"},{"size":3982,"mtime":1660579819979,"results":"23","hashOfConfig":"21"},{"size":841,"mtime":1659853570635,"results":"24","hashOfConfig":"21"},{"size":1637,"mtime":1660579038399,"results":"25","hashOfConfig":"21"},{"size":1311,"mtime":1660579011548,"results":"26","hashOfConfig":"21"},{"filePath":"27","messages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"8jtq2z",{"filePath":"29","messages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"19qkvbq",{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\OGOYI\\evently\\src\\index.js",[],"C:\\Users\\OGOYI\\evently\\src\\App.js",["52","53","54"],"C:\\Users\\OGOYI\\evently\\src\\reportWebVitals.js",[],"C:\\Users\\OGOYI\\evently\\src\\components\\Navbar.js",[],"C:\\Users\\OGOYI\\evently\\src\\components\\CreateEvents.js",[],"C:\\Users\\OGOYI\\evently\\src\\components\\Events.js",[],"C:\\Users\\OGOYI\\Desktop\\Evently\\src\\index.js",[],"C:\\Users\\OGOYI\\Desktop\\Evently\\src\\reportWebVitals.js",[],"C:\\Users\\OGOYI\\Desktop\\Evently\\src\\App.js",["55","56","57"],"import './App.css';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\n\r\n\r\n\r\n\r\nimport Web3 from \"web3\";\r\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport IERC from \"./contract/IERC.abi.json\";\r\nimport Evently from  './contract/Evently.abi.json';\r\nimport CreateEvents from './components/CreateEvents';\r\nimport Events from './components/Events';\r\n\r\n\r\nconst ERC20_DECIMALS = 18;\r\n\r\n\r\nconst contractAddress = \"0x3065cD68601af6799F6E5037F0382E67CD95667b\";\r\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\r\n\r\n\r\n\r\nfunction App(){\r\nconst [contract, setcontract] = useState(null);\r\n\tconst [address, setAddress] = useState(null);\r\n\tconst [kit, setKit] = useState(null);\r\n\tconst [cUSDBalance, setcUSDBalance] = useState(0);\r\n\tconst [events, setEvents] = useState([]);\r\n\r\n\tconst connectToWallet = async () => {\r\n\t\tif (window.celo) {\r\n\t\t\ttry {\r\n\t\t\t\tawait window.celo.enable();\r\n\t\t\t\tconst web3 = new Web3(window.celo);\r\n\t\t\t\tlet kit = newKitFromWeb3(web3);\r\n\r\n\t\t\t\tconst accounts = await kit.web3.eth.getAccounts();\r\n\t\t\t\tconst user_address = accounts[0];\r\n\r\n\t\t\t\tkit.defaultAccount = user_address;\r\n\r\n\t\t\t\tawait setAddress(user_address);\r\n\t\t\t\tawait setKit(kit);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Error Occurred\");\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconnectToWallet();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (kit && address) {\r\n\t\t\tgetBalance();\r\n\t\t}\r\n\t}, [kit, address]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (contract) {\r\n\t\t\tgetEvents();\r\n\t\t}\r\n\t}, [contract]);\r\n\r\n\tconst getBalance = async () => {\r\n\t\ttry {\r\n\t\t\tconst balance = await kit.getTotalBalance(address);\r\n\t\t\tconst USDBalance = balance.cUSD\r\n\t\t\t\t.shiftedBy(-ERC20_DECIMALS)\r\n\t\t\t\t.toFixed(2);\r\n\t\t\tconst contract = new kit.web3.eth.Contract(\r\n\t\t\t\tEvently,\r\n\t\t\t\tcontractAddress\r\n\t\t\t);\r\n\t\t\tsetcontract(contract);\r\n\t\t\tsetcUSDBalance(USDBalance);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst getEvents = async () => {\r\n\t\tconst eventsLength = await contract.methods.getEventsLength().call();\r\n\t\tconsole.log(eventsLength);\r\n\t\tconst _evento = [];\r\n\t\tfor (let index = 0; index < eventsLength; index++) {\r\n\t\t\tlet _events = new Promise(async (resolve, reject) => {\r\n\t\t\t\tlet event = await contract.methods.getEvent(index).call();\r\n\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\towner: event[0],\r\n\t\t\t\t\timage: event[1],\r\n\t\t\t\t\ttheme: event[2],\r\n\t\t\t\t\tdate: event[3],\r\n\t\t\t\t\tlocation: event[4],\r\n\t\t\t\t\tfollow: event[5],\r\n\t\t\t\t\tprice: event[6],\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t_evento.push(_events);\r\n\t\t}\r\n\t\tconst _events = await Promise.all(_evento);\r\n\t\tsetEvents(_events);\r\n\t\tconsole.log(events);\r\n\t};\r\n\r\n\tconst CreateEvent = async (_image, _theme, _date, _location, price) => {\r\n\t\tconst _price = new BigNumber(price)\r\n\t\t\t.shiftedBy(ERC20_DECIMALS)\r\n\t\t\t.toString();\r\n\t\ttry {\r\n\t\t\tawait contract.methods\r\n\t\t\t\t.createEvent(_image, _theme, _date, _location, _price)\r\n\t\t\t\t.send({ from: address });\r\n\t\t\tgetEvents();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst followEvent = async (_index) => {\r\n\t\ttry {\r\n\t\t\tawait contract.methods.followEvent(_index).send({ from: address });\r\n\t\t\tgetEvents();\r\n\t\t\tgetBalance();\r\n\t\t} catch (error) {\r\n\t\t\talert.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst buyTicket = async (_index) => {\r\n\t\ttry {\r\n\t\t\tconst cUSDContract = new kit.web3.eth.Contract(\r\n\t\t\t\tIERC,\r\n\t\t\t\tcUSDContractAddress\r\n\t\t\t);\r\n\r\n\t\t\tawait cUSDContract.methods\r\n\t\t\t\t.approve(contractAddress, events[_index].price)\r\n\t\t\t\t.send({ from: address });\r\n\t\t\tawait contract.methods.buyTicket(_index).send({ from: address });\r\n\t\t\tgetEvents();\r\n\t\t\tgetBalance();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Navbar balance={cUSDBalance} />\r\n\t\t\t<Events\r\n\t\t\t\tevents={events}\r\n\t\t\t\tbuyTicket={buyTicket}\r\n\t\t\t\tfollowEvent={followEvent}\r\n\t\t\t/>\r\n\t\t\t<CreateEvents CreateEvent={CreateEvent} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;","C:\\Users\\OGOYI\\Desktop\\Evently\\src\\components\\Navbar.js",[],"C:\\Users\\OGOYI\\Desktop\\Evently\\src\\components\\CreateEvents.js",[],"C:\\Users\\OGOYI\\Desktop\\Evently\\src\\components\\Events.js",[],{"ruleId":"58","severity":1,"message":"59","line":4,"column":31,"nodeType":"60","messageId":"61","endLine":4,"endColumn":42},{"ruleId":"62","severity":1,"message":"63","line":67,"column":6,"nodeType":"64","endLine":67,"endColumn":20,"suggestions":"65"},{"ruleId":"62","severity":1,"message":"66","line":73,"column":6,"nodeType":"64","endLine":73,"endColumn":16,"suggestions":"67"},{"ruleId":"58","severity":1,"message":"59","line":4,"column":31,"nodeType":"60","messageId":"61","endLine":4,"endColumn":42},{"ruleId":"62","severity":1,"message":"63","line":63,"column":5,"nodeType":"64","endLine":63,"endColumn":19,"suggestions":"68"},{"ruleId":"62","severity":1,"message":"66","line":69,"column":5,"nodeType":"64","endLine":69,"endColumn":15,"suggestions":"69"},"no-unused-vars","'useCallback' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getBalance'. Either include it or remove the dependency array.","ArrayExpression",["70"],"React Hook useEffect has a missing dependency: 'getEvents'. Either include it or remove the dependency array.",["71"],["72"],["73"],{"desc":"74","fix":"75"},{"desc":"76","fix":"77"},{"desc":"74","fix":"78"},{"desc":"76","fix":"79"},"Update the dependencies array to be: [kit, address, getBalance]",{"range":"80","text":"81"},"Update the dependencies array to be: [contract, getEvents]",{"range":"82","text":"83"},{"range":"84","text":"81"},{"range":"85","text":"83"},[1658,1672],"[kit, address, getBalance]",[1754,1764],"[contract, getEvents]",[1558,1572],[1643,1653]]